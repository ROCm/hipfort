<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>HIPFORT: hipfort_rocsparse::rocsparse_spgemm Interface Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">HIPFORT
   &#160;<span id="projectnumber">0.3.0</span>
   </div>
   <div id="projectbrief">Fortran Interface For GPU Kernel Libraries</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacehipfort__rocsparse.html">hipfort_rocsparse</a></li><li class="navelem"><a class="el" href="interfacehipfort__rocsparse_1_1rocsparse__spgemm.html">rocsparse_spgemm</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="interfacehipfort__rocsparse_1_1rocsparse__spgemm-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">hipfort_rocsparse::rocsparse_spgemm Interface Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>!  
 <a href="interfacehipfort__rocsparse_1_1rocsparse__spgemm.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader"></div></td></tr>
<tr class="memitem:acfc112aa354573a92ef62260de38683c"><td class="memItemLeft" align="right" valign="top">integer(kind(rocsparse_status_success)) function&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfacehipfort__rocsparse_1_1rocsparse__spgemm.html#acfc112aa354573a92ef62260de38683c">rocsparse_spgemm_</a> (handle, trans_A, trans_B, alpha, A, B, beta, D, C, compute_type, alg, stage, buffer_size, temp_buffer)</td></tr>
<tr class="separator:acfc112aa354573a92ef62260de38683c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>! </p>
<p>Sparse matrix sparse matrix multiplication</p>
<p><a class="el" href="interfacehipfort__rocsparse_1_1rocsparse__spgemm.html">rocsparse_spgemm</a> multiplies the scalar \(\alpha\) with the sparse \(m \times k\) matrix \(A\) and the sparse \(k \times n\) matrix \(B\) and adds the result to the sparse \(m \times n\) matrix \(D\) that is multiplied by \(\beta\). The final result is stored in the sparse \(m \times n\) matrix \(C\), such that </p><p class="formulaDsp">
\[ C := \alpha \cdot op(A) \cdot op(B) + \beta \cdot D, \]
</p>
<p> with {array} . ] and {array} . ]</p>
<dl class="section note"><dt>Note</dt><dd>SpGEMM requires three stages to complete. The first stage rocsparse_spgemm_stage_buffer_size will return the size of the temporary storage buffer that is required for subsequent calls to <a class="el" href="interfacehipfort__rocsparse_1_1rocsparse__spgemm.html">rocsparse_spgemm</a>. The second stage rocsparse_spgemm_stage_nnz will determine the number of non-zero elements of the resulting \(C\) matrix. If the sparsity pattern of \(C\) is already known, this stage can be skipped. In the final stage rocsparse_spgemm_stage_compute, the actual computation is performed. </dd>
<dd>
If rocsparse_spgemm_stage_auto is selected, rocSPARSE will automatically detect which stage is required based on the following indicators: If <code>temp_buffer</code> is equal to <code>nullptr</code>, the required buffer size will be returned. Else, if the number of non-zeros of \(C\) is zero, the number of non-zero entries will be computed. Else, the SpGEMM algorithm will be executed. </dd>
<dd>
If \(\alpha == 0\), then \(C = \beta \cdot D\) will be computed. </dd>
<dd>
If \(\beta == 0\), then \(C = \alpha \cdot op(A) \cdot op(B)\) will be computed. </dd>
<dd>
\(\alpha == beta == 0\) is invalid. </dd>
<dd>
It is allowed to pass the same sparse matrix for \(C\) and \(D\), if both matrices have the same sparsity pattern. </dd>
<dd>
Currently, only <code>trans_A</code> == rocsparse_operation_none is supported. </dd>
<dd>
Currently, only <code>trans_B</code> == rocsparse_operation_none is supported. </dd>
<dd>
This function is non blocking and executed asynchronously with respect to the host. It may return before the actual computation has finished. </dd>
<dd>
Please note, that for rare matrix products with more than 4096 non-zero entries per row, additional temporary storage buffer is allocated by the algorithm.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">handle</td><td>handle to the rocsparse library context queue. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">trans_A</td><td>sparse matrix \(A\) operation type. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">trans_B</td><td>sparse matrix \(B\) operation type. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">alpha</td><td>scalar \(\alpha\). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">A</td><td>sparse matrix \(A\) descriptor. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">B</td><td>sparse matrix \(B\) descriptor. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">beta</td><td>scalar \(\beta\). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">D</td><td>sparse matrix \(D\) descriptor. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">C</td><td>sparse matrix \(C\) descriptor. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">compute_type</td><td>floating point precision for the SpGEMM computation. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">alg</td><td>SpGEMM algorithm for the SpGEMM computation. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">stage</td><td>SpGEMM stage for the SpGEMM computation. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">buffer_size</td><td>number of bytes of the temporary storage buffer. buffer_size is set when <code>temp_buffer</code> is nullptr. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">temp_buffer</td><td>temporary storage buffer allocated by the user. When a nullptr is passed, the required allocation size (in bytes) is written to <code>buffer_size</code> and function returns without performing the SpGEMM operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">rocsparse_status_success</td><td>the operation completed successfully. </td></tr>
    <tr><td class="paramname">rocsparse_status_invalid_handle</td><td>the library context was not initialized. </td></tr>
    <tr><td class="paramname">rocsparse_status_invalid_pointer</td><td><code>alpha</code> and <code>beta</code> are invalid, <code>A</code>, <code>B</code>, <code>D</code>, <code>C</code> or <code>buffer_size</code> pointer is invalid. </td></tr>
    <tr><td class="paramname">rocsparse_status_memory_error</td><td>additional buffer for long rows could not be allocated. </td></tr>
    <tr><td class="paramname">rocsparse_status_not_implemented</td><td><code>trans_A</code> != rocsparse_operation_none or <code>trans_B</code> != rocsparse_operation_none. </td></tr>
  </table>
  </dd>
</dl>
</div><h2 class="groupheader">Member Function/Subroutine Documentation</h2>
<a id="acfc112aa354573a92ef62260de38683c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acfc112aa354573a92ef62260de38683c">&#9670;&nbsp;</a></span>rocsparse_spgemm_()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">integer(kind(rocsparse_status_success)) function hipfort_rocsparse::rocsparse_spgemm::rocsparse_spgemm_ </td>
          <td>(</td>
          <td class="paramtype">type(c_ptr), value&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer(kind(rocsparse_operation_none)), value&#160;</td>
          <td class="paramname"><em>trans_A</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer(kind(rocsparse_operation_none)), value&#160;</td>
          <td class="paramname"><em>trans_B</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(c_ptr), value&#160;</td>
          <td class="paramname"><em>alpha</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(c_ptr), value&#160;</td>
          <td class="paramname"><em>A</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(c_ptr), value&#160;</td>
          <td class="paramname"><em>B</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(c_ptr), value&#160;</td>
          <td class="paramname"><em>beta</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(c_ptr), value&#160;</td>
          <td class="paramname"><em>D</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(c_ptr), value&#160;</td>
          <td class="paramname"><em>C</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer(kind(rocsparse_datatype_f32_r)), value&#160;</td>
          <td class="paramname"><em>compute_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer(kind(rocsparse_spgemm_alg_default)), value&#160;</td>
          <td class="paramname"><em>alg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer(kind(rocsparse_spgemm_stage_auto)), value&#160;</td>
          <td class="paramname"><em>stage</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer(c_size_t)&#160;</td>
          <td class="paramname"><em>buffer_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(c_ptr), value&#160;</td>
          <td class="paramname"><em>temp_buffer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this interface was generated from the following file:<ul>
<li><a class="el" href="hipfort__rocsparse_8f03.html">hipfort_rocsparse.f03</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>

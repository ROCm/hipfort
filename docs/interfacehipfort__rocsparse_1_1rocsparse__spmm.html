<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>HIPFORT: hipfort_rocsparse::rocsparse_spmm Interface Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">HIPFORT
   &#160;<span id="projectnumber">0.3.0</span>
   </div>
   <div id="projectbrief">Fortran Interface For GPU Kernel Libraries</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacehipfort__rocsparse.html">hipfort_rocsparse</a></li><li class="navelem"><a class="el" href="interfacehipfort__rocsparse_1_1rocsparse__spmm.html">rocsparse_spmm</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="interfacehipfort__rocsparse_1_1rocsparse__spmm-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">hipfort_rocsparse::rocsparse_spmm Interface Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>!  
 <a href="interfacehipfort__rocsparse_1_1rocsparse__spmm.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader"></div></td></tr>
<tr class="memitem:a06de48385a9143b5525712cd4e2d4ccb"><td class="memItemLeft" align="right" valign="top">integer(kind(rocsparse_status_success)) function&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfacehipfort__rocsparse_1_1rocsparse__spmm.html#a06de48385a9143b5525712cd4e2d4ccb">rocsparse_spmm_</a> (handle, trans_A, trans_B, alpha, mat_A, mat_B, beta, mat_C, compute_type, alg, buffer_size, temp_buffer)</td></tr>
<tr class="separator:a06de48385a9143b5525712cd4e2d4ccb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>! </p>
<p>Sparse matrix dense matrix multiplication</p>
<p><code><a class="el" href="interfacehipfort__rocsparse_1_1rocsparse__spmm.html" title="! ">rocsparse_spmm</a></code> multiplies the scalar \(\alpha\) with a sparse \(m \times k\) matrix \(A\), defined in CSR, COO or Blocked ELL storage format, and the dense \(k \times n\) matrix \(B\) and adds the result to the dense \(m \times n\) matrix \(C\) that is multiplied by the scalar \(\beta\), such that </p><p class="formulaDsp">
\[ C := \alpha \cdot op(A) \cdot op(B) + \beta \cdot C, \]
</p>
<p> with {array} . ] and {array} . ]</p>
<dl class="section note"><dt>Note</dt><dd>This function is non blocking and executed asynchronously with respect to the host. It may return before the actual computation has finished.</dd>
<dd>
Currently, only <code>trans_A</code> == rocsparse_operation_none is supported.</dd>
<dd>
Currently, only CSR, COO and Blocked ELL sparse formats are supported.</dd>
<dd>
Different algorithms are available which can provide better performance for different matrices. Currently, the available algorithms are rocsparse_spmm_alg_csr, rocsparse_spmm_alg_csr_row_split or rocsparse_spmm_alg_csr_merge for CSR matrices, rocsparse_spmm_alg_bell for Blocked ELL matrices and rocsparse_spmm_alg_coo_segmented or rocsparse_spmm_alg_coo_atomic for COO matrices. Additionally, one can specify the algorithm to be rocsparse_spmm_alg_default. In the case of CSR matrices this will set the algorithm to be rocsparse_spmm_alg_csr, in the case of Blocked ELL matrices this will set the algorithm to be rocsparse_spmm_alg_bell and for COO matrices it will set the algorithm to be rocsparse_spmm_alg_coo_atomic.</dd>
<dd>
This function writes the required allocation size (in bytes) to <code>buffer_size</code> and returns without performing the SpMM operation, when a nullptr is passed for <code>temp_buffer</code>.</dd>
<dd>
This function is non blocking and executed asynchronously with respect to the host. It may return before the actual computation has finished.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">handle</td><td>handle to the rocsparse library context queue. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">trans_A</td><td>matrix operation type. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">trans_B</td><td>matrix operation type. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">alpha</td><td>scalar \(\alpha\). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">mat_A</td><td>matrix descriptor. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">mat_B</td><td>matrix descriptor. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">beta</td><td>scalar \(\beta\). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">mat_C</td><td>matrix descriptor. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">compute_type</td><td>floating point precision for the SpMM computation. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">alg</td><td>SpMM algorithm for the SpMM computation. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">buffer_size</td><td>number of bytes of the temporary storage buffer. When <code>buffer_size</code> is not nullptr and <code>temp_buffer</code> is nullptr, <code>buffer_size</code> will be set and the function returns without performing the SpMM operation. Currently only rocsparse_spmm_alg_csr_merge requires a user allocated buffer. Attempting to get the buffer size with any other algorithm will return a buffer size of 4 bytes and is not required. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">temp_buffer</td><td>temporary storage buffer allocated by the user. When <code>temp_buffer</code> is not nullptr and <code>buffer_size</code> is nullptr, <code>temp_buffer</code> will be filled with any analysis data and the function returns without performing the SpMM operation. Currently only rocsparse_spmm_alg_csr_merge requires analysis data. Attempting to perform analysis with any other algorithm does nothing and is not necessary.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">rocsparse_status_success</td><td>the operation completed successfully. </td></tr>
    <tr><td class="paramname">rocsparse_status_invalid_handle</td><td>the library context was not initialized. </td></tr>
    <tr><td class="paramname">rocsparse_status_invalid_pointer</td><td><code>alpha</code>, <code>mat_A</code>, <code>mat_B</code>, <code>mat_C</code>, <code>beta</code>, or <code>buffer_size</code> pointer is invalid. </td></tr>
    <tr><td class="paramname">rocsparse_status_not_implemented</td><td><code>trans_A</code>, <code>trans_B</code>, <code>compute_type</code> or <code>alg</code> is currently not supported. </td></tr>
  </table>
  </dd>
</dl>
</div><h2 class="groupheader">Member Function/Subroutine Documentation</h2>
<a id="a06de48385a9143b5525712cd4e2d4ccb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06de48385a9143b5525712cd4e2d4ccb">&#9670;&nbsp;</a></span>rocsparse_spmm_()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">integer(kind(rocsparse_status_success)) function hipfort_rocsparse::rocsparse_spmm::rocsparse_spmm_ </td>
          <td>(</td>
          <td class="paramtype">type(c_ptr), value&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer(kind(rocsparse_operation_none)), value&#160;</td>
          <td class="paramname"><em>trans_A</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer(kind(rocsparse_operation_none)), value&#160;</td>
          <td class="paramname"><em>trans_B</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(c_ptr), value&#160;</td>
          <td class="paramname"><em>alpha</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(c_ptr), value&#160;</td>
          <td class="paramname"><em>mat_A</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(c_ptr), value&#160;</td>
          <td class="paramname"><em>mat_B</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(c_ptr), value&#160;</td>
          <td class="paramname"><em>beta</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(c_ptr), value&#160;</td>
          <td class="paramname"><em>mat_C</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer(kind(rocsparse_datatype_f32_r)), value&#160;</td>
          <td class="paramname"><em>compute_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer(kind(rocsparse_spmm_alg_default)), value&#160;</td>
          <td class="paramname"><em>alg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer(c_size_t)&#160;</td>
          <td class="paramname"><em>buffer_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(c_ptr), value&#160;</td>
          <td class="paramname"><em>temp_buffer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this interface was generated from the following file:<ul>
<li><a class="el" href="hipfort__rocsparse_8f03.html">hipfort_rocsparse.f03</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
